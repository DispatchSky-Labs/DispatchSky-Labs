# CieloTracker Pro - Xcode Setup Walkthrough

## Step-by-Step Guide

### Prerequisites
- ‚úÖ Xcode 14.0 or later (preferably Xcode 15+)
- ‚úÖ macOS (for Xcode)
- ‚úÖ Apple ID (free account works for simulator, paid account needed for device)

---

## Step 1: Open Xcode and Create New Project

1. **Launch Xcode**
   - Open Xcode from Applications folder
   - If this is your first time, Xcode may ask to install additional components - click "Install"

2. **Create New Project**
   - Click **File** ‚Üí **New** ‚Üí **Project** (or press ‚åò‚áßN)
   - You should see the template selector

3. **Choose Template**
   - Select **iOS** (at the top)
   - Choose **App** (first option)
   - Click **Next** button (bottom right)

---

## Step 2: Configure Project Settings

1. **Product Information**
   - **Product Name:** Type `CieloTrackerPro` (no spaces - Xcode prefers this)
   - **Team:** Select your Apple ID team (or "Add Account" if needed)
     - If you don't have a paid account, "None" works for simulator only
   - **Organization Identifier:** Type your identifier (e.g., `com.sam` or `com.yourname`)
   - **Bundle Identifier:** Will auto-generate (e.g., `com.sam.CieloTrackerPro`)

2. **Interface Options**
   - **Interface:** Select **SwiftUI** ‚ö†Ô∏è **IMPORTANT!**
   - **Language:** Select **Swift**
   - **Storage:** Select **SwiftData** ‚ö†Ô∏è **CRITICAL!** (Not "None" or "Core Data")

3. **Options**
   - ‚úÖ **Include Tests:** You can check or uncheck (optional)
   - Click **Next**

4. **Choose Location**
   - Navigate to where you want to save the project
   - Make sure "Create Git repository" is checked (optional but recommended)
   - Click **Create**

---

## Step 3: Wait for Xcode to Initialize

- Xcode will create the project and open it
- This may take a few seconds
- You should see the project navigator on the left side

---

## Step 4: Remove Default Files

1. **Find Default Files**
   - In the Project Navigator (left sidebar), look for:
     - `ContentView.swift`
     - `CieloTrackerProApp.swift` (or similar - the app file)
     - These were auto-generated by Xcode

2. **Delete Them**
   - Right-click on `ContentView.swift` ‚Üí **Delete** ‚Üí Choose **Move to Trash**
   - Right-click on `CieloTrackerProApp.swift` ‚Üí **Delete** ‚Üí Choose **Move to Trash**
   - (We'll replace these with our custom versions)

---

## Step 5: Create Folder Structure

You need to create **4 separate groups** (folders) to organize your code.

1. **Create First Group: Models**
   - Right-click on `CieloTrackerPro` (blue folder icon) in Navigator
   - Select **New Group**
   - Type: `Models` and press Enter

2. **Create Second Group: Services**
   - Right-click on `CieloTrackerPro` again
   - Select **New Group**
   - Type: `Services` and press Enter

3. **Create Third Group: Views**
   - Right-click on `CieloTrackerPro` again
   - Select **New Group**
   - Type: `Views` and press Enter

4. **Create Fourth Group: ViewModels**
   - Right-click on `CieloTrackerPro` again
   - Select **New Group**
   - Type: `ViewModels` and press Enter

5. **Verify Structure**
   - Your structure should look like:
   ```
   CieloTrackerPro/ (blue folder)
   ‚îú‚îÄ‚îÄ Models/ (yellow folder)
   ‚îú‚îÄ‚îÄ Services/ (yellow folder)
   ‚îú‚îÄ‚îÄ Views/ (yellow folder)
   ‚îî‚îÄ‚îÄ ViewModels/ (yellow folder)
   ```
   - **Note:** Groups appear as yellow folders in Xcode

---

## Step 6: Add Project Files

### Method A: Drag and Drop (Easiest)

1. **Open Finder**
   - Navigate to: `/Users/sam/Sadiom/CieloTracker_iOS/CieloTracker/`
   - You should see all the Swift files

2. **Add Files to Xcode**
   - **Select all files** you want to add (not the folder, but the files inside)
   - **Drag them** into Xcode's Project Navigator
   - Drop them in the appropriate groups:
     - `Flight.swift`, `WeatherData.swift` ‚Üí `Models/`
     - `WeatherService.swift`, `FlightSyncService.swift` ‚Üí `Services/`
     - All view files ‚Üí `Views/`
     - `FlightListViewModel.swift` ‚Üí `ViewModels/`
     - `CieloTrackerApp.swift` ‚Üí Root level (same level as `CieloTrackerPro` folder)
     - `Info.plist` ‚Üí Root level

3. **Configure When Adding**
   - A dialog will appear when you drop files
   - ‚úÖ **Check:** "Copy items if needed"
   - ‚úÖ **Check:** "Create groups" (not "Create folder references")
   - ‚úÖ **Check:** Your target (`CieloTrackerPro`) in "Add to targets"
   - Click **Finish**

### Method B: Add Files Manually

1. **Right-click on group** (e.g., `Models/`)
2. Select **Add Files to "CieloTrackerPro"...**
3. Navigate to the file location
4. Select file(s)
5. Check **"Copy items if needed"**
6. Check your target
7. Click **Add**

---

## Step 7: Verify Files Are Added

1. **Check Project Navigator**
   - Expand all groups
   - Verify you see:
     ```
     CieloTrackerPro/
     ‚îú‚îÄ‚îÄ CieloTrackerApp.swift
     ‚îú‚îÄ‚îÄ Info.plist
     ‚îú‚îÄ‚îÄ Models/
     ‚îÇ   ‚îú‚îÄ‚îÄ Flight.swift
     ‚îÇ   ‚îî‚îÄ‚îÄ WeatherData.swift
     ‚îú‚îÄ‚îÄ Services/
     ‚îÇ   ‚îú‚îÄ‚îÄ WeatherService.swift
     ‚îÇ   ‚îî‚îÄ‚îÄ FlightSyncService.swift
     ‚îú‚îÄ‚îÄ Views/
     ‚îÇ   ‚îú‚îÄ‚îÄ ContentView.swift
     ‚îÇ   ‚îú‚îÄ‚îÄ FlightListView.swift
     ‚îÇ   ‚îú‚îÄ‚îÄ WeatherDetailView.swift
     ‚îÇ   ‚îú‚îÄ‚îÄ SyncOptionsView.swift
     ‚îÇ   ‚îî‚îÄ‚îÄ AddFlightView.swift
     ‚îî‚îÄ‚îÄ ViewModels/
         ‚îî‚îÄ‚îÄ FlightListViewModel.swift
     ```

2. **Check Target Membership**
   - Select any file
   - Open File Inspector (right sidebar, or press ‚åò‚å•1)
   - Under "Target Membership", verify `CieloTrackerPro` is checked
   - Repeat for all files

---

## Step 8: Configure Info.plist

1. **Locate Info.plist**
   - Find `Info.plist` in Project Navigator
   - It should be in the root level

2. **Update Display Name**
   - The provided `Info.plist` already has `CFBundleDisplayName` set to "CieloTracker Pro"
   - If Xcode created its own Info.plist, you may need to:
     - Right-click ‚Üí **Open As** ‚Üí **Source Code**
     - Add this key:
     ```xml
     <key>CFBundleDisplayName</key>
     <string>CieloTracker Pro</string>
     ```
   - Or merge settings from our provided Info.plist

3. **Verify App Transport Security**
   - The Info.plist should have network permissions for the weather API
   - Check that `NSAppTransportSecurity` settings are present

---

## Step 9: Configure Project Settings

1. **Select Project**
   - Click on **CieloTrackerPro** (blue icon) at the top of Project Navigator
   - This opens project settings

2. **General Tab**
   - **Display Name:** Should be "CieloTracker Pro" (set in Info.plist)
   - **Bundle Identifier:** Should be unique (e.g., `com.sam.CieloTrackerPro`)
   - **Deployment Info:**
     - **iOS:** Set to **15.0** or higher
     - **Devices:** iPhone (and iPad if you want)

3. **Signing & Capabilities Tab**
   - **Automatically manage signing:** ‚úÖ Check this
   - **Team:** Select your team (or "None" for simulator)
   - **Bundle Identifier:** Should match your organization identifier

4. **Info Tab**
   - Verify iOS Deployment Target is **15.0** or higher
   - Check that SwiftData is available

---

## Step 10: Build the Project

1. **Select Target Device**
   - At the top of Xcode, next to the play button
   - Click the device selector
   - Choose an **iPhone Simulator** (e.g., "iPhone 15 Pro")

2. **Clean Build Folder** (Optional but recommended)
   - Press **‚åò‚áßK** (Product ‚Üí Clean Build Folder)

3. **Build Project**
   - Press **‚åòB** (Product ‚Üí Build)
   - Or click the play button (‚ñ∂Ô∏è) to build and run

4. **Check for Errors**
   - Look at the bottom of Xcode for any error messages
   - Common issues:
     - Missing files ‚Üí Check target membership
     - SwiftData errors ‚Üí Verify iOS 15.0+ deployment
     - Import errors ‚Üí Check all files are added

---

## Step 11: Run the App

1. **Launch Simulator**
   - Press **‚åòR** (Product ‚Üí Run)
   - Or click the play button (‚ñ∂Ô∏è)
   - Xcode will build and launch the simulator

2. **Verify App Launches**
   - Simulator should open
   - App should launch showing "No Flights" message
   - You should see "CieloTracker Pro" in the navigation bar

3. **Test Basic Functionality**
   - Tap the **+** button to add a flight
   - Tap the menu (‚ãØ) button to see options
   - Verify everything loads correctly

---

## Step 12: Sync Flights from Web App

1. **Export from Web App**
   - Open `pro_beta.html` in your browser
   - Make sure you have flights loaded
   - Open DevTools (F12 or Cmd+Option+I)
   - Go to **Console** tab
   - Run this command:
     ```javascript
     JSON.stringify(JSON.parse(localStorage.getItem('ct_pro_flights')))
     ```
   - **Copy the JSON output**

2. **Import to iOS App**
   - In the running iOS app (simulator)
   - Tap the menu button (‚ãØ) in top right
   - Tap **"Sync"**
   - Paste the JSON you copied
   - Tap **"Import Flights"**
   - ‚úÖ Flights should appear!

3. **Test Weather**
   - Tap menu (‚ãØ) ‚Üí **"Refresh Weather"**
   - Wait for weather to load
   - Tap an ICAO code (e.g., KORD)
   - Weather modal should appear

---

## Step 13: Test on Device (Optional)

1. **Connect iPhone**
   - Connect your iPhone via USB
   - Unlock your iPhone
   - Trust the computer if prompted

2. **Select Device**
   - In Xcode, click device selector
   - Choose your iPhone

3. **Configure Signing**
   - Go to **Signing & Capabilities** tab
   - Select your **Team**
   - Xcode will automatically manage signing

4. **Run on Device**
   - Press **‚åòR** to build and run
   - On your iPhone, go to **Settings** ‚Üí **General** ‚Üí **VPN & Device Management**
   - Trust your developer certificate
   - App should install and launch

---

## Troubleshooting

### Build Errors

**Error: "Cannot find type 'Flight' in scope"**
- **Fix:** Select the file ‚Üí File Inspector ‚Üí Check "Target Membership"
- Verify all files are added to the target

**Error: "SwiftData not available"**
- **Fix:** Check iOS Deployment Target is 15.0+
- Project Settings ‚Üí General ‚Üí Deployment Info ‚Üí iOS

**Error: "No such module 'SwiftData'"**
- **Fix:** This shouldn't happen, but try:
  - Clean build folder (‚åò‚áßK)
  - Restart Xcode
  - Verify Xcode version (14.0+)

**Error: Missing files**
- **Fix:** Verify all files are in project
- Check target membership for each file
- Re-add missing files

### Runtime Errors

**App crashes on launch**
- **Fix:** Check console for error messages
- Verify Info.plist is correct
- Check that CieloTrackerApp.swift is the main entry point

**Weather not loading**
- **Fix:** Check network permissions in Info.plist
- Verify API URL in WeatherService.swift
- Check console for network errors

**Sync not working**
- **Fix:** Verify JSON format matches expected structure
- Check that all required fields are present
- Ensure model context is saving

---

## Quick Checklist

Before running, verify:
- [ ] All files are added to project
- [ ] All files have target membership checked
- [ ] Info.plist has CFBundleDisplayName = "CieloTracker Pro"
- [ ] iOS Deployment Target is 15.0+
- [ ] SwiftData is selected as storage
- [ ] SwiftUI is selected as interface
- [ ] Project builds without errors

---

## Next Steps After Setup

1. ‚úÖ Test app launches
2. ‚úÖ Test sync from web app
3. ‚úÖ Test weather loading
4. ‚úÖ Test adding flights manually
5. ‚¨ú (Optional) Enable iCloud sync
6. ‚¨ú (Optional) Test on physical device
7. ‚¨ú (Optional) Add to App Store

---

## Need Help?

- Check Xcode console for error messages
- Review INSTALLATION.md for more details
- Check QUICK_START.md for quick reference
- Verify all files are in project and have correct target membership

---

## Success!

If you see the app running in the simulator with "CieloTracker Pro" in the title bar, you're all set! üéâ

You can now:
- Sync flights from the web app
- View weather data
- Monitor flights on your iPhone
- Add flights manually

